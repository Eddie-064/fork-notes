# Home Automation

随着网络的普及，智能家居相关产品变得越来越受欢迎。

搞了个 Homelab 后，我就在想，能不能搞个智能家居系统实现诸如定时开关空调、回家后自动打开灯光、播放音乐、语音控制等等。

## 硬件

智能家居的核心是数据，数据来源则是各类传感器，传感器对智能家居是非常重要的。细数下大概需要这些：

- 传感器：体感、门磁、光感、温湿度、压感、震感等各类传感器
- 红外光发射器：主要用来遥控空调、电视等传统家居电器
- 麦克风 + 扬声器
- 摄像头：可以实现家庭监控、或者单纯记录自己晚上睡觉情况也行...

上述各类输入输出传感器，可以自己折腾 ESPHome 这类 DIY 方案，也可以买封装好的智能家居产品。
以小米米家为例，「小爱音箱 Pro」就是一个集成度较高的 iot 蓝牙网关 + 传感器 + 音箱的组合。

针对我现在的环境「仅半年租期的租房，床是复式吊顶构造」，目前我的智能家居清单如下：

- 小爱音箱 Pro
  - 全屋智能的接入口之一，另一个全屋智能接入口是 Home Assistant
- nioye 米家追光灯带 3m
  - 小房间的智能灯光就全靠它了
- 小米人体移动传感器 + 小米温湿度传感器
  - 因为看着也不贵，就先买个成品了。后续也考虑自己用 ESPHome 折腾下 DIY
- 小米门窗传感器2
  - 开窗自动关闭空调、关窗户且温度高时自动开空调
- 小白摄像头 室内云台 A2（小米生态链）
- 云米泉先净饮机（小米生态链）
- 华为体脂秤
- 力博得智能牙刷（华为生态链）
- 小米平板5 Pro
- Oppo 智能手表
- ZTE AX5400 Pro+ 无线路由器
- Homelab + NAS: 8T 机械硬盘存储 + 三台 mini 主机 + 树莓派 4B（四台机器均带有 wifi 蓝牙模块）

前面提到除了上面的品牌智能家居产品，用 [ESPHome](https://github.com/esphome/esphome) + Home Assistant 做智能家居 DIY 目前在国内外也很流行。
它流行的主要原因显然是价格相当便宜，上手难度也不高（基本只需要写 yaml，完全不需要写任何代码）。
一个 ESP8266 就算是开发版也才 13 块钱，ESP32-C3 开发版也就买 20 块钱左右，各种传感器更是白菜价。
跟前述的品牌智能家居产品相比便宜太多了。

我对 ESPHome 也相当感兴趣，因此又在淘宝上买了一堆白菜价的 DIY 组件。
方便起见，我在淘宝上找到了一家性价比较高且销量不错的店（信泰微电子），买了上述所有硬件，具体有如下这些：

- 各种传感器：光敏、粉尘、空气质量、人体红外感应、红外发射、霍尔磁力、光强度、温湿度、OLED 显示屏等等
- ESP32-C3 开发版
- ESP8266 开发版
- USB 转 TTL 串口小板 + microUSB 连接线
- 面包板线与电源实验套件 + 母对母杜邦线 + 零件盒
- 万用表
- 等等（好像忘买电阻电容、二极管三极管了，之后再补吧...）

## 全屋智能架构

东西刚下单，都还没到货，等有进展再更新...

# Home Assistant 插件

- [hass-xiaomi-miot](https://github.com/al-one/hass-xiaomi-miot): 用于接入小米米家生态相关 iot 设备

## 参考

- [Home Assistant 中文社区](https://bbs.hassbian.com/)
- [HomeAssistant 的插件系统](https://aqzscn.cn/archives/homeassistant-adds-on)
- ESPHome DIY 相关
  - [【零基础】一起DIY智能家居 篇一：硬件准备及docker安装HA、esphome ](https://post.smzdm.com/p/allgwv5p/)
- 品牌智能家居产品相关
  - [铺设智能家居，有哪些传感器和感应器是值得安装的？](https://www.zhihu.com/question/455627729)
  - [如何搭建一个完善的智能家居系统？](https://www.zhihu.com/question/395318023)
  - [智能家居怎么做？](https://www.zhihu.com/question/373947946)
