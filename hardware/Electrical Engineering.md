# 电子工程 Electrical Engineering


## 一、电子电路基础知识

>建议挨个 Google + 问 ChatGPT

目前强烈推荐国外站点出品的电工入门知识盘点（纯英文）：[Engineering Essentials](https://www.sparkfun.com/engineering_essentials)

看完上面的文章后，再随着玩得越来越深入，可能会陆续了解这些内容：

- 什么是开发版，以及如何使用
- 什么是 TTL 串口与串口驱动，以及如何使用
- 什么是 GPIO 引脚，以及开发版的引脚各有什么功能
- 如何使用 USB 转 TTL 串口版给 ESP32/ESP8266 刷固件
- 如何使用万用表测电压、电流、电阻
  - （N 年前学这玩意儿时用的是最简单易懂的物理指针表，但是实际显然是电子的用着更方便）
  - 回忆下用法：首先调到合适档位，然后测电流要串联到电路中、测电压要与被测器件并联、测电阻直接接在被测器件两端即可。
- 什么元件需要防静电，以及有线防静电手环/台垫

烧完智能家居后又想烧智能小车、机械臂，又在淘宝上下单了（如果 ESP32 不好用就改用我闲置的树莓派 4B）：

- 4 自由度木板机械臂 + 4 个 SG90 舵机
- 智能小车底盘（四驱 + 双层）
- 三轴加速度传感器
- 超声波测距传感器
- 双轴摇杆
- L9110S 四路直流电机驱动板

>等智能小车烧完，下一步估计得是烧 PCB 版设计、3D 建模打印、机器人、飞控穿越机了。

案例：

- [[插件集成] HA自带的微软TTS引擎的全面改进威力加强版](https://bbs.hassbian.com/thread-13480-1-3.html)
- 其他在淘宝 B 站上看一些 Makers 做的项目
  - LED 风扇全息显示器
  - 自制激光投影仪
  - 超声波驻波悬浮摆件
  - 自平衡方块（动量惯性轮）
  - 等等

### 1. 常用电子元件介绍

常见电子元器件：

- 电阻
- 二极管 Diode
  - 发光二极管
  - 整流二极管
  - 稳压二极管
- 三极管
- 电解电容
- 瓷片电容
- 三端稳压管
- 晶振
- 独石电容

电阻就没啥可介绍的了，下面从二极管开始挨个说明下。

#### 1.1 二极管 Diode

>https://learn.sparkfun.com/tutorials/diodes

二极管是一种只允许电流由单一方向流过，具有两个电极的元件，是现代电子产业的基石。

最初的二极管是真空电子二极管，很大、需要预热、功耗大，易破碎。
后来美国人使用半导体材料发明了晶体二极管（或者叫半导体二极管）。
目前常用的二极管都是晶体二极管，主要使用硅或者锗这类半导体材料。

晶体二极管的核心是 PN 结（p–n junction），PN 结的具体原理需要稍微深入一点的物理学知识，不过我在这里只关注它的用法，就直接跳过了。

电阻拥有线性的伏安特性曲线，遵从欧姆定律。而二极管则完全不同，它伏安特性曲线（Current-Voltage Graph）如下：

![](/hardware/_img/diode-current-voltage-graph.png)

几个主要特征与相关名词介绍：

- 正向压降 Forward Voltage: 指使电流能够导通的最小电压 $V_F$
  - 「正向压降」被用于克服二极管的内部电场了，所以在电流通过二极管后，电压需要减去这个电压，这也是中文名「正向压降」的由来。
    - 硅二极管的正向压降通常为 0.6V - 1V，锗二极管的正向压降通常为 0.3V
  - 根据伏安特性曲线，实际上随着电流的变化，「正向压降」也是有小幅波动的，不过计算时一般都认为它是固定值。
- 击穿电压 Breakdown Voltage: 指使电流能否反向导通的最小电压，从图中标识看，显然它远大于「正向压降」。
    - 当电流能经过二极管反向导通时，我们称二极管被击穿（Breakdown）

二极管依据其设计目标，分类了许多不同类别：

- 普通二极管
- 整流器(rectifier) / 功率二极管（power diode）
  - 依靠二极管只能单向导通的原理，可以使用它将交流电变成直流电。
  - 能承受较大的正向电流和较高的反向电压
- 发光二极管（Light-Emitting Diodes, LEDs）
  - LED 的正向压降取决于它的颜色，而且比较固定，通常红色约为 1.6V，绿色有 2V 和 3V 两种，黄色和橙色约为 2.2V，蓝色约为 3.2V
- 稳压二极管
  - 利用二极管在反向击穿状态，其电流可在很大范围内变化而电压基本不变的现象，制成的起稳压作用的二极管。
- 开关二极管
  - 能够快速由导通变为截止或由截止变为导通的一种二极管。
- 检波二极管
  - TODO
- 阻尼二极管
  - 具有较低有电压降和较高的工作频率，且能承受较高的反向击穿电压和较大的峰值电流。

还有二极管堆组：

- 整流桥堆(半桥、全桥)
  - 菱形联接

等等

#### 1.2 三极管 bipolar transistor

三极管即双极型晶体管，前面介绍了二极管结构为单个 PN 结，而三极管的结构则为 PNP 或者 NPN 结构，具有电流放大作用，是电子电路的核心元件之一。

三极管是一种电流放大器件，但在实际使用中常常通过电阻将三极管的电流放大作用转变为电压放大作用。

TODO

#### 1.3 MOSFET 金氧场效应晶体管

场效应晶体管是电压控制元件，而双极型晶体管是电流控制元件。

在只允许从取较少电流的情况下，应选用场效应管；而在信号电压较低，又允许从信号源取较多电流的条件下，应选用双极晶体管。

MOSFET 最大的用途是数字信号处理，其在此领域的成功主要源自 CMOS 集成电路的发明，CPU/APU 的核心都是 MOSFET 集成电路。

### 2. 常见电路计算方式

### 2.1 如何选用正确的电阻？

这需要使用到我们中学学过的物理学欧姆定律公式：

$$V =  I \cdot R$$

首先针对电子电路领域的 hello world，即发光二极管 + 电阻：

![](/hardware/_img/helloworld-led%2Bresistor.png)

#### 2.1.1 使用电流估算

我们可以根据 LED 灯的最大电流来估算电阻值，根据欧姆定律有

$$R = \frac{V}{I}$$

普通发光二极管的正常工作电流通常为 $2 \text{mA}$ ~ $20 \text{mA}$，电流越大它就越亮，正向压降有好几种，假设我们的为 $3.3V$。

因此电路允许的最大电流为 $0.02 \text{A}$，如果电源电压为 3.7V，那电阻得到的电压大概为 $0.4 \text{V}$，这样可计算得到 $R$ 为 $20 \Omega$.

发光二极管在正常工作状态几乎没有电阻，因此可以直接将上面计算出的结果当作串联电阻的阻值。

因此为了使发光二极管正常工作，串联电阻应该略大于 $25 \Omega$.

#### 2.1.2 使用电压估算

TODO


## 二、电子电路工具套装介绍

玩硬件的话，工具套装是必不可少的，最先遇到的场景就是——很多的传感器都需要自己焊接排针。

- 万用电表 Multimeter
- 电烙铁 Soldering Iron
- 面包板 Breadboard
- 玻纤洞洞板 Stripboard / Perfboard
- 示波器 Oscilloscope
  - 这个超贵，入门阶段玩不上也玩不起

电子元器件又主要分类两类：

- 插式元器件
  - 传统电子元器件，都带有较长引脚，PCB 版需要为引脚预留通孔。
  - 相关技术：through-hole technology
- 片式元器件 SMD (surface-mount device)
  - 一种新型元器件，比插式元器件要小很多，而且 PCB 板不需要预留插孔，更节省材料跟空间，广泛应用在各种小型化电子设备中。
  - 相关技术：(SMT) Surface-mount technology
  - 相关设备：激光打印钢网、贴片机（巨贵）

### 1. 电烙铁篇

电烙铁主要考虑的是升温速度跟温度保持能力，便宜的电烙铁基本都有升温慢、焊接中途易失温等毛病。
目前总结的电烙铁信息如下：

- 便携电烙铁：入门级别推荐
  - 优缺点：便携、价格低。但是升温相对焊台要慢一些，温控相对不够精确，而且无自动休眠，空烧烙铁头容易氧化，再有就是它没有接地不防经典，焊接精密元件比较危险。
  - 貌似主要推荐广东黄花 907 电烙铁，淘宝官方店买个刀头的 54 大洋
- 焊台：进阶推荐，也可考虑一步到位...
  - 优缺点：发热很快、热容相对较大，自动休眠不会空烧、还有过流保护、单片机稳定温控。缺点是要贵一些，另外相对没那么便携。
  - 相关流行产品
    - [白菜白光 T12 恒温焊台](https://hackmd.io/@openlabtaipei/SyfdnAPtU)，最早是网友基于日本白光公司 T12 烙铁头（日本工厂到期强制报废的洋垃圾）配上自制恒温控制电路完成的 DIY 焊台，因为相对高端焊台相当便宜所以冠以「白菜」之名。
      - 淘宝上相关产品都是个人 DIY，品控与安全性难以保证，新手不建议烧这个。
      - 淘宝上白菜白光 T12 的价格有点高，口碑好点的雪驹电子卖 168 大洋
- 二合一焊台：焊台自带热风枪 + 高频电烙铁两件套，高手必备（一般拆机才会用到热风枪）
  - 高频电烙铁使用的是跟电磁炉一样的高频涡流发热原理，电烙铁头自身发热，不需要任何发热芯，发热很快、热容大、烙铁头更换便宜。高端烙铁头都是高频的。
  - 反正就很高级也很贵啦。我现阶段买了它也是浪费钱，所以没了解具体型号啥的了

关于电烙铁头，貌似刀头是最推荐的，因为它用途最广泛，基本适用所有场景。

电烙铁，我最后买的第一把电烙铁是网友 DIY 的「L245 焊笔 玫瑰金」，铝合金 CNC 切割工艺，Type-C 供电，最高支持到 PD 120W，颜值很高，口碑也很好，价格是 148 大洋（目前发现的缺点：得用 JBC245 的烙铁头，这个头很贵，不知道使用寿命如何）。

#### 电烙铁的使用与保养

>参考：http://www.cxg.cn/newshow1346.html

毕竟买的是 150 一把的焊笔，C245 这个烙铁头也不便宜，直接当耗材随便折腾就太浪费了。有必要搞清楚怎么使用与保养电烙铁：

- 焊接作业前，先为高温海绵加水湿润，再挤掉部分水分。
  - 如果使用非湿润的清洁海绵，会使烙铁头受损氧化，导致不沾锡。
- 焊接作业中，每次都先在高温海绵上擦干净焊咀上的旧锡，再进行焊接。
  - 中途不使用时，如果无自动休眠功能，可以手动将温度调低至 200 度以下，避免空烧。空烧会降低焊咀寿命。
- 焊接完毕后，将温度调至约 250 摄氏度，使用湿润的高温海绵清洁烙铁头，最后将烙铁头加上一层新锡作保护，这样可以保护焊咀和空气隔离，焊咀不会氧化变黑。
- 焊咀已经氧化、不沾锡时应如何处理
  - 先把温度调到 300 摄氏度，用清洁海绵清理焊咀，并检查焊咀状况。
  - 如果焊咀的镀锡层部分含有黑色氧化物时，可镀上新锡层，再用清洁海绵抹净焊咀。如此重复清理，直到彻底去除氧化物，然后在镀上新锡层。
    - 将温度调至 200 摄氏度左右貌似比较容易上锡，不易聚成球。
    - 实测上锡再用海绵抹除，每次都能摸走一些黑色氧化物，非常有效。不过要清理干净还是需要一些耐心。
  - 如果焊咀变形或穿孔，必须替换新咀。
- 其他注意事项
  - 勿大力焊接：只要让烙铁头充分接触焊点，热量就可传递，无需大力焊接。
  - 尽量低温焊接：高温焊接会加速烙铁头氧化，降低烙铁头使用寿命。如烙铁头温度超过470℃，它的氧化速度是380℃的两倍。
  - 经常保持烙铁头上锡：这可以减低烙铁头的氧化机会，使烙铁头更耐用。
  - 保持烙铁头清洁与及时清理氧化物
  - 小心放入烙铁架：如果焊咀接触到烙铁架无法自动休眠，长时间空烧将会毁掉焊咀。
  - 选用活性低的助焊剂：最便宜的就是松香，更好一点的是无铅无酸无卤素助焊剂。

### 2. 其他焊接工具

焊材（建议买贵一点的，出问题少，更省心）：

- 焊丝：最常见的焊材，不过稍微要求一点焊接技术，可能需要大约半个小时熟悉下
  - 常用 0.8mm 跟 1.0mm 的锡丝
  - 个人玩建议买无铅的，虽然贵点熔点高一点，但更环保，对身体也好。
- 锡膏：新型焊接材料，由焊锡粉、助焊剂以及其它的表面活性剂等混合成的膏状物。
  - 对于常用焊接场景，可以直接抹上锡膏，然后用热风枪一吹，或者用烙铁刀头拖焊，据说非常简单好用。
  - 最常用的场景是复杂 PCB 板子，直接用定制的钢丝网覆盖 PCB 板子刷上锡膏、直接就把触点都刷上了，然后再用镊子手工贴上贴片元器件。不过这个有难度...已经是高手玩法了。最省心是花钱直接找 PCB 厂子给打印 + 焊接（钞能力）。
  - 同样，个人玩建议买无铅的，虽然贵点熔点高一点，但更环保，对身体也好。
- 高温海绵：一般买焊台都会送一片，感觉可以多备几片，经常清洁烙铁头的话还是很容易脏的。
- 铜丝球：同样是用于清洁烙铁头的，据说很好用，可以搞一个。
- 助焊剂 Flux：
  - 在焊接工艺中能帮助和促进焊接过程，同时具有保护作用、阻止氧化反应的化学物质。
  - 高纯度松香：便宜常用，一般焊个传感器跟普通 PCB 板子完全够用。
    - 不过焊完需要用酒精浸泡清洗，避免助焊剂碳化导致绝缘性能下降。
  - 无铅无卤无酸助焊剂：高端助焊剂，免洗
    - 无铅主要是为了环保，对身体好。
    - 因为卤素离子很难清洗干净，助焊剂残留将导致绝缘性能下降，因此免洗助焊剂必须得无卤素。
    - 无酸是为了避免助焊剂腐蚀电路板跟、引脚、烙铁头。

以及其他相关工具：

- 吸锡器：主要用于电器拆焊
  - 场景：一是焊错了或者锡多了，拆焊后重新焊接。二是拆焊其他电路
  - 这玩意儿一个便宜的才十多块，入门阶段买一个也行。不过也有说拿电烙铁热一下然后一磕，焊锡就自己掉下去了，自己玩不一定需要这玩意儿。
- 吸锡带：拿来清理表贴焊盘上的残锡。就是一卷细铜丝编制的带子，融化的锡容易被它吸走
  - 比吸锡器更便宜万用，可以考虑买一卷
- 热风枪：前面提过了，也是拆焊用的，当然用来吹热缩管也很好用。
  - 这个入门阶段买就有点浪费了，起码等用的到再考虑吧
- 硅胶垫
  - 焊台夹具：焊线焊板子都挺实用，相当于长出来四只手。而且相比放桌面，它的散热速度低很多，更难失温。
  - 尖嘴钳：焊接完一些非贴片元件，必须要把多余的引脚剪掉，尖嘴钳感觉挺需要的。
  - 维修工作台（耐高温硅胶垫）：淘宝上一二十块钱一块，可以保护桌子、方便放一些小元器件。
  - 切割垫：如果需要做一些切割，这个应该也很有用，看许多网友都有，不过我暂时没搞清楚自己是否需要。
  - 螺丝磁性收纳垫：其实跟焊接关系不大了，不过也列一下

## 2. 如何学习电子电路

再有就是可以买一些入门的焊接套件练练手，我在淘宝「电子爱好者之家」上买了几个焊接套件，如指尖陀螺、5V 升 12V 升压板、LED 灯摇摇棒、十二个实验洞洞板套件、高压发生器等。

如果还要继续烧下去，那就是示波器、稳压电源、3D 打印机，甚至频谱分析仪了，还有看到直接买贴片机的大佬，这都不是我等凡人现在该考虑的事...

## 三、进阶 - PCB 打版 + 3D 打印

PCB 即 Printed Circuit Board，直译是「打印电路板」。
面包板仅适合原型设计或者自己玩，但是要做高集成度的非玩具产品，就必须得上 PCB 了。

PCB 板子的设计与打印（俗称打版）会是更进阶的内容，不过低烧阶段可以直接靠面包板做测试原型，靠玻纤洞洞板 + 焊接电路做些成品出来玩玩。

提前收藏下一个开源硬件平台 [立创开源硬件平台](https://oshwhub.com/)，视发烧程度后面可能会搞上....

## 四、ESPHome 篇

我就是从 ESPHome 开始入门电子电路的。

我从入坑开始，随着我慢慢熟悉电子电路，陆续在多个淘宝店买了许多相关组件，罗列如下：

- 各种传感器：光敏、粉尘、空气质量、人体红外感应、红外发射接收、霍尔磁力、光强度、温湿度、液晶显示屏（单色/全彩）、麦克风等等
  - 注意家里没电烙铁的纯新手（比如我），一定注意买已经焊接好引脚的传感器，否则就得考虑买电烙铁了（要多花百来块钱，如果确定长期玩，可以入手）。
- ESP32 开发版（ESP32-WROOM-32 模组）
- ESP32-C3 开发版
  - ESP32-C3-MINI-1 模组，开发版型号为 `esp32-c3-devkitm-1`
  - 这个板子比较新，引脚也偏少，esphome 生态中一些模块直接用在它上面会报错，需要魔改。
- ESP8266 开发版（型号 `esp01_1m`）
- ESP-12F mini D1 开发版
  - 核心是 ESP8266，不过它只有 16 个引脚，不带 USB 转 TTL 芯片，但是相对小很多。
- ESP-01S 无线模块 + 2 个 Relay 继电器模块
  - 核心也是 ESP8266 但是只引出了 8 个针脚，适合用在智能插座等场景
- ESP32-CAM 开发版 + OV2640 摄像头
- USB 转 TTL 串口小板 + microUSB 连接线
- MB-102 830 孔面包板 * 2 + 400 孔面包板 * 4 + 面包板专用电源 * 4
- 面包线一盒（840 根） + 母对母杜邦线 40P（即 40 根） + 母对公杜邦线 40P + 热缩管一盒
- 10 格零件盒 + 大号 8 格零件盒
- 防静电手环（冬天玩电子设备必备）
  - 液晶屏之类的零件很容易被静电搞坏
- USB 升压线（USB 5v 输入，DC 12v 输出）
- microUSB 数据线
- ESD10-15 镊子一套 6 个

